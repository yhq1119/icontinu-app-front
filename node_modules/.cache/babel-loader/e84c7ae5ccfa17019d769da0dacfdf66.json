{"remainingRequest":"C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\src\\store\\store.js","dependencies":[{"path":"C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\src\\store\\store.js","mtime":1571889586747},{"path":"C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"C:\\\\Users\\\\Nathan\\\\Desktop\\\\github-repository\\\\icontinu-app-front\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport API from '../service/API';\nimport axios from 'axios';\nVue.use(Vuex);\nexport default new Vuex.Store({\n  state: {\n    username: window.localStorage.getItem('username'),\n    isLogin: false,\n    isAdmin: false,\n    dialog_login: false,\n    azure_config: {\n      headers: {\n        \"content-type\": \"application/octet-stream\",\n        \"Ocp-Apim-Subscription-Key\": \"a193aaa4368842fea4098fa4489c17ca\"\n      },\n      timeout: 5000\n    },\n    azure_api: \"https://australiaeast.api.cognitive.microsoft.com/face/v1.0/detect?returnFaceId=true\",\n    snackbar: {\n      showing: null,\n      text: '',\n      color: ''\n    },\n    courses: [],\n    barItems: [//\n    {\n      icon: \"mdi-account-box-outline\",\n      title: \"Account\",\n      link: \"/user/account\",\n      admin: false,\n      show: true\n    }, {\n      icon: \"mdi-book\",\n      title: \"Suggested\",\n      link: \"/suggest\",\n      admin: false,\n      show: true\n    }, {\n      icon: \"mdi-book-open-variant\",\n      title: \"My Courses\",\n      link: \"/user/suggest\",\n      admin: false,\n      show: true\n    }, {\n      icon: \"mdi-content-paste\",\n      title: \"Report\",\n      link: \"/user/report\",\n      admin: false,\n      show: true\n    }, {\n      icon: \"mdi-history\",\n      title: \"History\",\n      link: \"/user/history\",\n      admin: false,\n      show: true\n    }, {\n      icon: \"mdi-credit-card\",\n      title: \"QR Code Scan\",\n      link: \"/admin/qr\",\n      admin: true,\n      show: false\n    }, {\n      icon: \"mdi-credit-card\",\n      title: \"Manage Courses\",\n      link: \"/admin/manage\",\n      admin: true,\n      show: false\n    }],\n    randomPics: [{\n      src: \"https://images.unsplash.com/photo-1569025743873-ea3a9ade89f9?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjExMDk0fQ&auto=format&fit=crop&w=1050&q=80\"\n    }, {\n      src: \"https://images.unsplash.com/photo-1563283323-afa46a75568c?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1029&q=80\"\n    }, {\n      src: \"https://images.unsplash.com/photo-1496171367470-9ed9a91ea931?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80\"\n    }, {\n      src: \"https://images.unsplash.com/photo-1474377207190-a7d8b3334068?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80\"\n    }, {\n      src: \"https://images.unsplash.com/photo-1558986377-c44f6a2b50f0?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=634&q=80\"\n    }, {\n      src: \"https://images.unsplash.com/photo-1459499362902-55a20553e082?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1049&q=80\"\n    }]\n  },\n  getters: {\n    //\n    findCourseById: function findCourseById(state) {\n      return function (id) {\n        return state.courses.find(function (c) {\n          return c.course_id == id;\n        }) || {};\n      };\n    }\n  },\n  mutations: {\n    //\n    SET_SNACKBAR: function SET_SNACKBAR(state, data) {\n      state.snackbar.showing = data.showing;\n      state.snackbar.text = data.text;\n      state.snackbar.color = data.color;\n    },\n    //\n    SET_ADMIN_LOGIN: function SET_ADMIN_LOGIN(state, data) {\n      state.isAdmin = true;\n      state.isLogin = true;\n      this.username = data; /////\n\n      window.localStorage.setItem('username', data);\n    },\n    //\n    SET_USER_LOGIN: function SET_USER_LOGIN(state, data) {\n      state.isLogin = true;\n      state.isAdmin = false;\n      this.username = data; /////\n\n      window.localStorage.setItem('username', data);\n    },\n    //\n    DO_NOTHING: function DO_NOTHING(state, data) {\n      console.log(state);\n      console.log(data);\n    },\n    LOG_OUT: function LOG_OUT(state, data) {\n      console.log(state);\n      console.log(data);\n      window.localStorage.removeItem('username');\n      state.isLogin = false;\n      state.isAdmin = false;\n    }\n  },\n  actions: {\n    callAzure: function () {\n      var _callAzure = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(_ref, file) {\n        var commit, res;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                commit = _ref.commit;\n                console.log('calling azure');\n                console.log(this.state.azure_config);\n                console.log(this.state.azure_api); // let Axios = axios.create({\n                //   baseURL: this.state.azure_api,\n                //   headers: this.state.azure_config.headers\n                // })\n\n                _context.next = 6;\n                return axios.post(this.state.azure_api, file, this.state.azure_config);\n\n              case 6:\n                res = _context.sent;\n                commit('DO_NOTHING', {}); // console.log(res)\n\n                return _context.abrupt(\"return\", res.data);\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function callAzure(_x, _x2) {\n        return _callAzure.apply(this, arguments);\n      }\n\n      return callAzure;\n    }(),\n    set_courses: function () {\n      var _set_courses = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var res, pics, i;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.dispatch('callAPI', {\n                  send: {},\n                  branch: '/get_all_courses/',\n                  call: 'DO_NOTHING',\n                  setData: {}\n                });\n\n              case 2:\n                res = _context2.sent;\n                // console.log(\"=======================courses results===============================\")\n                // console.log(res.courses)\n                this.state.courses = res.courses;\n                pics = this.state.randomPics;\n\n                for (i = 0; i < this.state.courses.length; i++) {\n                  this.state.courses[i].src = pics[i % 5].src;\n                  this.state.courses[i].ran = parseInt(Math.random() * 100000 * Math.random());\n\n                  if (this.state.courses[i].course_desc.length < 1) {\n                    this.state.courses[i].course_desc = \"No Description\";\n                  } // if()\n                  // {}\n\n\n                  this.state.courses[i].bgc = 'background-color:red';\n                } // }\n                // catch(err){\n                //   return err\n                // }\n\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function set_courses() {\n        return _set_courses.apply(this, arguments);\n      }\n\n      return set_courses;\n    }(),\n    callAPI: function () {\n      var _callAPI = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(_ref2, data) {\n        var commit, branch, send, call, setData, res, res2;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                commit = _ref2.commit;\n                // try {\n                branch = data.branch; // see branch info\n                // console.log(`The branch is ${branch}`)\n\n                send = data.send; // see FormData info\n                // if (send instanceof FormData) {\n                //   for (var pair of send.entries()) {\n                //     console.log(`The send data is ${pair[0]} : ${pair[1]}`)\n                //   }\n                // }\n\n                call = data.call; // console.log(call)\n\n                setData = data.setData; // console.log(setData)\n\n                _context3.next = 7;\n                return API().post(branch, send);\n\n              case 7:\n                res = _context3.sent;\n\n                if (!(branch == '/authenticate/')) {\n                  _context3.next = 18;\n                  break;\n                }\n\n                if (!(res.data.code == 'true')) {\n                  _context3.next = 17;\n                  break;\n                }\n\n                this.state.isLogin = true;\n                _context3.next = 13;\n                return API().post('/authenticate_staff/');\n\n              case 13:\n                res2 = _context3.sent;\n\n                if (res2.data.code == 'true') {\n                  this.state.isAdmin = true;\n                } else {\n                  this.state.isAdmin = false;\n                }\n\n                _context3.next = 18;\n                break;\n\n              case 17:\n                commit('LOG_OUT', {});\n\n              case 18:\n                return _context3.abrupt(\"return\", res.data);\n\n              case 19:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function callAPI(_x3, _x4) {\n        return _callAPI.apply(this, arguments);\n      }\n\n      return callAPI;\n    }()\n  }\n});",{"version":3,"sources":["C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\src\\store\\store.js"],"names":["Vue","Vuex","API","axios","use","Store","state","username","window","localStorage","getItem","isLogin","isAdmin","dialog_login","azure_config","headers","timeout","azure_api","snackbar","showing","text","color","courses","barItems","icon","title","link","admin","show","randomPics","src","getters","findCourseById","id","find","c","course_id","mutations","SET_SNACKBAR","data","SET_ADMIN_LOGIN","setItem","SET_USER_LOGIN","DO_NOTHING","console","log","LOG_OUT","removeItem","actions","callAzure","file","commit","post","res","set_courses","dispatch","send","branch","call","setData","pics","i","length","ran","parseInt","Math","random","course_desc","bgc","callAPI","code","res2"],"mappings":";;;;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAOC,GAAP,MAAgB,gBAAhB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACAH,GAAG,CAACI,GAAJ,CAAQH,IAAR;AAEA,eAAe,IAAIA,IAAI,CAACI,KAAT,CAAe;AAC5BC,EAAAA,KAAK,EAAE;AACLC,IAAAA,QAAQ,EAAEC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,UAA5B,CADL;AAELC,IAAAA,OAAO,EAAE,KAFJ;AAGLC,IAAAA,OAAO,EAAE,KAHJ;AAILC,IAAAA,YAAY,EAAE,KAJT;AAKLC,IAAAA,YAAY,EAAE;AACZC,MAAAA,OAAO,EAAE;AACP,wBAAgB,0BADT;AAEP,qCAA6B;AAFtB,OADG;AAKZC,MAAAA,OAAO,EAAE;AALG,KALT;AAYLC,IAAAA,SAAS,EAAE,sFAZN;AAcLC,IAAAA,QAAQ,EAAE;AACRC,MAAAA,OAAO,EAAE,IADD;AAERC,MAAAA,IAAI,EAAE,EAFE;AAGRC,MAAAA,KAAK,EAAE;AAHC,KAdL;AAoBLC,IAAAA,OAAO,EAAE,EApBJ;AAqBLC,IAAAA,QAAQ,EAAE,CACR;AACA;AACEC,MAAAA,IAAI,EAAE,yBADR;AAEEC,MAAAA,KAAK,EAAE,SAFT;AAGEC,MAAAA,IAAI,EAAE,eAHR;AAIEC,MAAAA,KAAK,EAAE,KAJT;AAKEC,MAAAA,IAAI,EAAE;AALR,KAFQ,EASR;AACEJ,MAAAA,IAAI,EAAE,UADR;AAEEC,MAAAA,KAAK,EAAE,WAFT;AAGEC,MAAAA,IAAI,EAAE,UAHR;AAIEC,MAAAA,KAAK,EAAE,KAJT;AAKEC,MAAAA,IAAI,EAAE;AALR,KATQ,EAgBR;AACEJ,MAAAA,IAAI,EAAE,uBADR;AAEEC,MAAAA,KAAK,EAAE,YAFT;AAGEC,MAAAA,IAAI,EAAE,eAHR;AAIEC,MAAAA,KAAK,EAAE,KAJT;AAKEC,MAAAA,IAAI,EAAE;AALR,KAhBQ,EAuBR;AACEJ,MAAAA,IAAI,EAAE,mBADR;AAEEC,MAAAA,KAAK,EAAE,QAFT;AAGEC,MAAAA,IAAI,EAAE,cAHR;AAIEC,MAAAA,KAAK,EAAE,KAJT;AAKEC,MAAAA,IAAI,EAAE;AALR,KAvBQ,EA8BR;AACEJ,MAAAA,IAAI,EAAE,aADR;AAEEC,MAAAA,KAAK,EAAE,SAFT;AAGEC,MAAAA,IAAI,EAAE,eAHR;AAIEC,MAAAA,KAAK,EAAE,KAJT;AAKEC,MAAAA,IAAI,EAAE;AALR,KA9BQ,EAsCR;AACEJ,MAAAA,IAAI,EAAE,iBADR;AAEEC,MAAAA,KAAK,EAAE,cAFT;AAGEC,MAAAA,IAAI,EAAE,WAHR;AAIEC,MAAAA,KAAK,EAAE,IAJT;AAKEC,MAAAA,IAAI,EAAE;AALR,KAtCQ,EA6CR;AACEJ,MAAAA,IAAI,EAAE,iBADR;AAEEC,MAAAA,KAAK,EAAE,gBAFT;AAGEC,MAAAA,IAAI,EAAE,eAHR;AAIEC,MAAAA,KAAK,EAAE,IAJT;AAKEC,MAAAA,IAAI,EAAE;AALR,KA7CQ,CArBL;AA0ELC,IAAAA,UAAU,EAAE,CACV;AACEC,MAAAA,GAAG,EACD;AAFJ,KADU,EAKV;AACEA,MAAAA,GAAG,EACD;AAFJ,KALU,EASV;AACEA,MAAAA,GAAG,EACD;AAFJ,KATU,EAaV;AACEA,MAAAA,GAAG,EACD;AAFJ,KAbU,EAiBV;AACEA,MAAAA,GAAG,EACD;AAFJ,KAjBU,EAqBV;AACEA,MAAAA,GAAG,EACD;AAFJ,KArBU;AA1EP,GADqB;AAsG5BC,EAAAA,OAAO,EAAE;AACP;AACAC,IAAAA,cAAc,EAAE,wBAAA1B,KAAK;AAAA,aAAI,UAAC2B,EAAD,EAAQ;AAC/B,eAAO3B,KAAK,CAACgB,OAAN,CAAcY,IAAd,CAAmB,UAAAC,CAAC;AAAA,iBAAIA,CAAC,CAACC,SAAF,IAAeH,EAAnB;AAAA,SAApB,KAA8C,EAArD;AACD,OAFoB;AAAA;AAFd,GAtGmB;AA4G5BI,EAAAA,SAAS,EAAE;AACT;AACAC,IAAAA,YAFS,wBAEIhC,KAFJ,EAEWiC,IAFX,EAEiB;AACxBjC,MAAAA,KAAK,CAACY,QAAN,CAAeC,OAAf,GAAyBoB,IAAI,CAACpB,OAA9B;AACAb,MAAAA,KAAK,CAACY,QAAN,CAAeE,IAAf,GAAsBmB,IAAI,CAACnB,IAA3B;AACAd,MAAAA,KAAK,CAACY,QAAN,CAAeG,KAAf,GAAuBkB,IAAI,CAAClB,KAA5B;AACD,KANQ;AAOT;AACAmB,IAAAA,eARS,2BAQOlC,KARP,EAQciC,IARd,EAQoB;AAC3BjC,MAAAA,KAAK,CAACM,OAAN,GAAgB,IAAhB;AACAN,MAAAA,KAAK,CAACK,OAAN,GAAgB,IAAhB;AACA,WAAKJ,QAAL,GAAgBgC,IAAhB,CAH2B,CAGP;;AACpB/B,MAAAA,MAAM,CAACC,YAAP,CAAoBgC,OAApB,CAA4B,UAA5B,EAAwCF,IAAxC;AACD,KAbQ;AAcT;AACAG,IAAAA,cAfS,0BAeMpC,KAfN,EAeaiC,IAfb,EAemB;AAC1BjC,MAAAA,KAAK,CAACK,OAAN,GAAgB,IAAhB;AACAL,MAAAA,KAAK,CAACM,OAAN,GAAgB,KAAhB;AACA,WAAKL,QAAL,GAAgBgC,IAAhB,CAH0B,CAGN;;AACpB/B,MAAAA,MAAM,CAACC,YAAP,CAAoBgC,OAApB,CAA4B,UAA5B,EAAwCF,IAAxC;AACD,KApBQ;AAqBT;AACAI,IAAAA,UAtBS,sBAsBErC,KAtBF,EAsBSiC,IAtBT,EAsBe;AACtBK,MAAAA,OAAO,CAACC,GAAR,CAAYvC,KAAZ;AACAsC,MAAAA,OAAO,CAACC,GAAR,CAAYN,IAAZ;AACD,KAzBQ;AA0BTO,IAAAA,OA1BS,mBA0BDxC,KA1BC,EA0BMiC,IA1BN,EA0BY;AACnBK,MAAAA,OAAO,CAACC,GAAR,CAAYvC,KAAZ;AACAsC,MAAAA,OAAO,CAACC,GAAR,CAAYN,IAAZ;AACA/B,MAAAA,MAAM,CAACC,YAAP,CAAoBsC,UAApB,CAA+B,UAA/B;AACAzC,MAAAA,KAAK,CAACK,OAAN,GAAgB,KAAhB;AACAL,MAAAA,KAAK,CAACM,OAAN,GAAgB,KAAhB;AACD;AAhCQ,GA5GiB;AA8I5BoC,EAAAA,OAAO,EAAE;AACDC,IAAAA,SADC;AAAA;AAAA;AAAA,sDACqBC,IADrB;AAAA;AAAA;AAAA;AAAA;AAAA;AACWC,gBAAAA,MADX,QACWA,MADX;AAELP,gBAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACAD,gBAAAA,OAAO,CAACC,GAAR,CAAY,KAAKvC,KAAL,CAAWQ,YAAvB;AACA8B,gBAAAA,OAAO,CAACC,GAAR,CAAY,KAAKvC,KAAL,CAAWW,SAAvB,EAJK,CAKL;AACA;AACA;AACA;;AARK;AAAA,uBAUHd,KAAK,CAACiD,IAAN,CACE,KAAK9C,KAAL,CAAWW,SADb,EAEEiC,IAFF,EAGE,KAAK5C,KAAL,CAAWQ,YAHb,CAVG;;AAAA;AASDuC,gBAAAA,GATC;AAcLF,gBAAAA,MAAM,CAAC,YAAD,EAAe,EAAf,CAAN,CAdK,CAgBL;;AAhBK,iDAiBEE,GAAG,CAACd,IAjBN;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAqBDe,IAAAA,WArBC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAwBW,KAAKC,QAAL,CAAc,SAAd,EAAyB;AACvCC,kBAAAA,IAAI,EAAE,EADiC;AAEvCC,kBAAAA,MAAM,EAAE,mBAF+B;AAGvCC,kBAAAA,IAAI,EAAE,YAHiC;AAIvCC,kBAAAA,OAAO,EAAE;AAJ8B,iBAAzB,CAxBX;;AAAA;AAwBDN,gBAAAA,GAxBC;AA8BL;AACA;AACA,qBAAK/C,KAAL,CAAWgB,OAAX,GAAqB+B,GAAG,CAAC/B,OAAzB;AACIsC,gBAAAA,IAjCC,GAiCM,KAAKtD,KAAL,CAAWuB,UAjCjB;;AAkCL,qBAASgC,CAAT,GAAa,CAAb,EAAgBA,CAAC,GAAG,KAAKvD,KAAL,CAAWgB,OAAX,CAAmBwC,MAAvC,EAA+CD,CAAC,EAAhD,EAAoD;AAClD,uBAAKvD,KAAL,CAAWgB,OAAX,CAAmBuC,CAAnB,EAAsB/B,GAAtB,GAA4B8B,IAAI,CAACC,CAAC,GAAG,CAAL,CAAJ,CAAY/B,GAAxC;AACA,uBAAKxB,KAAL,CAAWgB,OAAX,CAAmBuC,CAAnB,EAAsBE,GAAtB,GAA4BC,QAAQ,CAACC,IAAI,CAACC,MAAL,KAAgB,MAAhB,GAAyBD,IAAI,CAACC,MAAL,EAA1B,CAApC;;AACA,sBAAI,KAAK5D,KAAL,CAAWgB,OAAX,CAAmBuC,CAAnB,EAAsBM,WAAtB,CAAkCL,MAAlC,GAA2C,CAA/C,EAAkD;AAChD,yBAAKxD,KAAL,CAAWgB,OAAX,CAAmBuC,CAAnB,EAAsBM,WAAtB,GAAoC,gBAApC;AACD,mBALiD,CAMlD;AACA;;;AACA,uBAAK7D,KAAL,CAAWgB,OAAX,CAAmBuC,CAAnB,EAAsBO,GAAtB,GAA4B,sBAA5B;AACD,iBA3CI,CA4CL;AACA;AACA;AACA;;;AA/CK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAiDDC,IAAAA,OAjDC;AAAA;AAAA;AAAA,wDAiDmB9B,IAjDnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAiDSY,gBAAAA,MAjDT,SAiDSA,MAjDT;AAkDL;AACIM,gBAAAA,MAnDC,GAmDQlB,IAAI,CAACkB,MAnDb,EAoDL;AACA;;AACID,gBAAAA,IAtDC,GAsDMjB,IAAI,CAACiB,IAtDX,EAuDL;AACA;AACA;AACA;AACA;AACA;;AAEIE,gBAAAA,IA9DC,GA8DMnB,IAAI,CAACmB,IA9DX,EA+DL;;AACIC,gBAAAA,OAhEC,GAgESpB,IAAI,CAACoB,OAhEd,EAiEL;;AAjEK;AAAA,uBAkEWzD,GAAG,GAAGkD,IAAN,CAAWK,MAAX,EAAmBD,IAAnB,CAlEX;;AAAA;AAkEDH,gBAAAA,GAlEC;;AAAA,sBAqEDI,MAAM,IAAI,gBArET;AAAA;AAAA;AAAA;;AAAA,sBAsECJ,GAAG,CAACd,IAAJ,CAAS+B,IAAT,IAAiB,MAtElB;AAAA;AAAA;AAAA;;AAuED,qBAAKhE,KAAL,CAAWK,OAAX,GAAqB,IAArB;AAvEC;AAAA,uBAwEgBT,GAAG,GAAGkD,IAAN,CAAW,sBAAX,CAxEhB;;AAAA;AAwEGmB,gBAAAA,IAxEH;;AAyED,oBAAIA,IAAI,CAAChC,IAAL,CAAU+B,IAAV,IAAkB,MAAtB,EAA8B;AAC5B,uBAAKhE,KAAL,CAAWM,OAAX,GAAqB,IAArB;AACD,iBAFD,MAGK;AACH,uBAAKN,KAAL,CAAWM,OAAX,GAAqB,KAArB;AACD;;AA9EA;AAAA;;AAAA;AAiFDuC,gBAAAA,MAAM,CAAC,SAAD,EAAY,EAAZ,CAAN;;AAjFC;AAAA,kDAwFEE,GAAG,CAACd,IAxFN;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AA9ImB,CAAf,CAAf","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport API from '../service/API'\nimport axios from 'axios'\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state: {\n    username: window.localStorage.getItem('username'),\n    isLogin: false,\n    isAdmin: false,\n    dialog_login: false,\n    azure_config: {\n      headers: {\n        \"content-type\": \"application/octet-stream\",\n        \"Ocp-Apim-Subscription-Key\": \"a193aaa4368842fea4098fa4489c17ca\"\n      },\n      timeout: 5000\n    },\n    azure_api: \"https://australiaeast.api.cognitive.microsoft.com/face/v1.0/detect?returnFaceId=true\",\n\n    snackbar: {\n      showing: null,\n      text: '',\n      color: '',\n\n    },\n    courses: [],\n    barItems: [\n      //\n      {\n        icon: \"mdi-account-box-outline\",\n        title: \"Account\",\n        link: \"/user/account\",\n        admin: false,\n        show: true\n      },\n      {\n        icon: \"mdi-book\",\n        title: \"Suggested\",\n        link: \"/suggest\",\n        admin: false,\n        show: true\n      },\n      {\n        icon: \"mdi-book-open-variant\",\n        title: \"My Courses\",\n        link: \"/user/suggest\",\n        admin: false,\n        show: true\n      },\n      {\n        icon: \"mdi-content-paste\",\n        title: \"Report\",\n        link: \"/user/report\",\n        admin: false,\n        show: true,\n      },\n      {\n        icon: \"mdi-history\",\n        title: \"History\",\n        link: \"/user/history\",\n        admin: false,\n        show: true\n      }\n      ,\n      {\n        icon: \"mdi-credit-card\",\n        title: \"QR Code Scan\",\n        link: \"/admin/qr\",\n        admin: true,\n        show: false\n      },\n      {\n        icon: \"mdi-credit-card\",\n        title: \"Manage Courses\",\n        link: \"/admin/manage\",\n        admin: true,\n        show: false\n      }\n    ],\n    randomPics: [\n      {\n        src:\n          \"https://images.unsplash.com/photo-1569025743873-ea3a9ade89f9?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjExMDk0fQ&auto=format&fit=crop&w=1050&q=80\"\n      },\n      {\n        src:\n          \"https://images.unsplash.com/photo-1563283323-afa46a75568c?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1029&q=80\"\n      },\n      {\n        src:\n          \"https://images.unsplash.com/photo-1496171367470-9ed9a91ea931?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80\"\n      },\n      {\n        src:\n          \"https://images.unsplash.com/photo-1474377207190-a7d8b3334068?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80\"\n      },\n      {\n        src:\n          \"https://images.unsplash.com/photo-1558986377-c44f6a2b50f0?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=634&q=80\"\n      },\n      {\n        src:\n          \"https://images.unsplash.com/photo-1459499362902-55a20553e082?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1049&q=80\"\n      }\n    ]\n  },\n  getters: {\n    //\n    findCourseById: state => (id) => {\n      return state.courses.find(c => c.course_id == id) || {}\n    },\n  },\n  mutations: {\n    //\n    SET_SNACKBAR(state, data) {\n      state.snackbar.showing = data.showing\n      state.snackbar.text = data.text\n      state.snackbar.color = data.color\n    },\n    //\n    SET_ADMIN_LOGIN(state, data) {\n      state.isAdmin = true\n      state.isLogin = true\n      this.username = data/////\n      window.localStorage.setItem('username', data)\n    },\n    //\n    SET_USER_LOGIN(state, data) {\n      state.isLogin = true\n      state.isAdmin = false\n      this.username = data/////\n      window.localStorage.setItem('username', data)\n    },\n    //\n    DO_NOTHING(state, data) {\n      console.log(state)\n      console.log(data)\n    },\n    LOG_OUT(state, data) {\n      console.log(state)\n      console.log(data)\n      window.localStorage.removeItem('username')\n      state.isLogin = false\n      state.isAdmin = false\n    }\n  },\n  actions: {\n    async callAzure({ commit }, file) {\n      console.log('calling azure')\n      console.log(this.state.azure_config)\n      console.log(this.state.azure_api)\n      // let Axios = axios.create({\n      //   baseURL: this.state.azure_api,\n      //   headers: this.state.azure_config.headers\n      // })\n      let res = await\n        axios.post(\n          this.state.azure_api,\n          file,\n          this.state.azure_config)\n      commit('DO_NOTHING', {})\n\n      // console.log(res)\n      return res.data\n\n\n    },\n    async set_courses() {\n      // try{\n      // console.log(\"=======================store set courses=============================\")\n      let res = await this.dispatch('callAPI', {\n        send: {},\n        branch: '/get_all_courses/',\n        call: 'DO_NOTHING',\n        setData: {}\n      })\n      // console.log(\"=======================courses results===============================\")\n      // console.log(res.courses)\n      this.state.courses = res.courses\n      var pics = this.state.randomPics\n      for (var i = 0; i < this.state.courses.length; i++) {\n        this.state.courses[i].src = pics[i % 5].src;\n        this.state.courses[i].ran = parseInt(Math.random() * 100000 * Math.random());\n        if (this.state.courses[i].course_desc.length < 1) {\n          this.state.courses[i].course_desc = \"No Description\";\n        }\n        // if()\n        // {}\n        this.state.courses[i].bgc = 'background-color:red'\n      }\n      // }\n      // catch(err){\n      //   return err\n      // }\n    },\n    async callAPI({ commit }, data) {\n      // try {\n      let branch = data.branch\n      // see branch info\n      // console.log(`The branch is ${branch}`)\n      let send = data.send\n      // see FormData info\n      // if (send instanceof FormData) {\n      //   for (var pair of send.entries()) {\n      //     console.log(`The send data is ${pair[0]} : ${pair[1]}`)\n      //   }\n      // }\n\n      let call = data.call\n      // console.log(call)\n      let setData = data.setData\n      // console.log(setData)\n      let res = await API().post(branch, send);\n      // console.log(res)\n      // console.log(res.data)\n      if (branch == '/authenticate/') {\n        if (res.data.code == 'true') {\n          this.state.isLogin = true\n          let res2 = await API().post('/authenticate_staff/')\n          if (res2.data.code == 'true') {\n            this.state.isAdmin = true\n          }\n          else {\n            this.state.isAdmin = false\n          }\n        }\n        else {\n          commit('LOG_OUT', {})\n        }\n      }\n\n      // if (res.data.code == \"ok\") {\n      //   commit(call, setData)\n      // }\n      return res.data\n      // }\n      // catch{\n      //   this.state.snackbar = {\n      //     showing: true,\n      //     text: 'Error in calling API',\n      //     color: 'error'\n      //   }\n      //   console.log('Error')\n      // }\n    }\n  }\n})\n"]}]}