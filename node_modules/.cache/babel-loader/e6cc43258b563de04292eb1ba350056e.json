{"remainingRequest":"C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\node_modules\\vuetify-loader\\lib\\loader.js!C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\src\\components\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\src\\components\\Login.vue","mtime":1571300397840},{"path":"C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1564062719000},{"path":"C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"C:\\\\Users\\\\Nathan\\\\Desktop\\\\github-repository\\\\icontinu-app-front\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState } from \"vuex\";\nimport Signup from \"./Signup\";\nexport default {\n  components: {\n    Signup: Signup\n  },\n  data: function data() {\n    return {\n      showpass: false,\n      requiredRule: [function (v) {\n        return !!v || \"Input required\";\n      }],\n      lazy: false,\n      valid: true,\n      usernameL: \"\",\n      dialog: false,\n      username: \"\",\n      pass1: \"\",\n      loading: null,\n      show: null,\n      message: \"\"\n    };\n  },\n  methods: {\n    clear: function clear() {\n      this.username = \"\";\n      this.pass1 = \"\";\n    },\n    snackBar: function snackBar(text, color) {\n      this.$store.commit(\"SET_SNACKBAR\", {\n        showing: true,\n        text: text,\n        color: color\n      });\n    },\n    cancel: function () {\n      var _cancel = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.$store.dispatch(\"callAPI\", {\n                  send: {},\n                  branch: \"/logout/\",\n                  call: \"DO_NOTHING\",\n                  setData: {}\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function cancel() {\n        return _cancel.apply(this, arguments);\n      }\n\n      return cancel;\n    }(),\n    logout: function () {\n      var _logout = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.$store.dispatch(\"callAPI\", {\n                  send: {},\n                  branch: \"/logout/\",\n                  call: \"DO_NOTHING\",\n                  setData: {}\n                });\n\n              case 2:\n                res = _context2.sent;\n                console.log(res);\n\n                if (res.code == \"ok\") {\n                  this.$store.commit(\"LOG_OUT\", false);\n                  this.$store.commit(\"SET_SNACKBAR\", {\n                    showing: true,\n                    text: \"Log out successfully\",\n                    color: \"success\"\n                  });\n                  setTimeout(this.$router.push(\"/\"), 1000);\n                } else {\n                  this.$store.commit(\"SET_SNACKBAR\", {\n                    showing: true,\n                    text: \"Error when logging out\",\n                    color: \"error\"\n                  });\n                }\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function logout() {\n        return _logout.apply(this, arguments);\n      }\n\n      return logout;\n    }(),\n    usernameset: function usernameset() {\n      this.usernameL = window.localStorage.getItem(\"username\");\n    },\n    login: function login() {\n      if (this.$refs.form1.validate()) {\n        this.submit();\n      }\n    },\n    loginAdmin: function loginAdmin() {\n      if (this.$refs.form1.validate()) {\n        this.admin();\n      }\n    },\n    admin: function () {\n      var _admin = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        var send, branch, call, dataSend, res;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                this.loading = true;\n                send = new FormData();\n                send.append(\"username\", this.username);\n                send.append(\"password\", this.pass1);\n                branch = \"/login/\";\n                call = \"DO_NOTHING\";\n                dataSend = {\n                  send: send,\n                  branch: branch,\n                  call: call,\n                  setData: {}\n                };\n                _context3.prev = 7;\n                _context3.next = 10;\n                return this.$store.dispatch(\"callAPI\", dataSend);\n\n              case 10:\n                res = _context3.sent;\n                console.log(res);\n\n                if (res.code == \"ok\") {\n                  if (res.is_staff != \"true\") {\n                    this.cancel();\n                    this.snackBar(\"Not Admin\", \"error\");\n                  } else {\n                    this.$store.commit(\"SET_ADMIN_LOGIN\", this.username);\n                    this.usernameset();\n                    this.snackBar(\"Login successfully\", \"success\");\n                    this.$router.push(\"/admin/qr\");\n                  }\n                } else {\n                  this.snackBar(\"Login failed, Invalid login info\", \"error\");\n                }\n\n                _context3.next = 18;\n                break;\n\n              case 15:\n                _context3.prev = 15;\n                _context3.t0 = _context3[\"catch\"](7);\n                this.$store.dispatch(\"SET_SNACKBAR\", {\n                  showing: true,\n                  text: \"Login error\",\n                  color: \"error\"\n                });\n\n              case 18:\n                this.loading = false;\n                this.close();\n\n              case 20:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[7, 15]]);\n      }));\n\n      function admin() {\n        return _admin.apply(this, arguments);\n      }\n\n      return admin;\n    }(),\n    submit: function () {\n      var _submit = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4() {\n        var send, branch, call, dataSend, res;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                this.loading = true;\n                send = new FormData();\n                send.append(\"username\", this.username);\n                send.append(\"password\", this.pass1);\n                branch = \"/login/\";\n                call = \"DO_NOTHING\";\n                dataSend = {\n                  send: send,\n                  branch: branch,\n                  call: call,\n                  setData: {}\n                };\n                _context4.prev = 7;\n                _context4.next = 10;\n                return this.$store.dispatch(\"callAPI\", dataSend);\n\n              case 10:\n                res = _context4.sent;\n                console.log(res);\n\n                if (res.code == \"ok\") {\n                  if (res.is_staff == \"true\") {\n                    this.snackBar(\"Not user\", \"error\");\n                    this.cancel();\n                  } else {\n                    this.$store.commit(\"SET_USER_LOGIN\", this.username);\n                    this.usernameset();\n                    this.snackBar(\"Login successfully\", \"success\");\n                    setTimeout(this.$router.push(\"/user/suggest\"), 3000);\n                  }\n                } else {\n                  this.snackBar(\"Login failed, Invalid login info\", \"error\");\n                }\n\n                _context4.next = 18;\n                break;\n\n              case 15:\n                _context4.prev = 15;\n                _context4.t0 = _context4[\"catch\"](7);\n                this.snackBar(\"Login error\", \"error\");\n\n              case 18:\n                this.loading = false;\n                this.close();\n\n              case 20:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[7, 15]]);\n      }));\n\n      function submit() {\n        return _submit.apply(this, arguments);\n      }\n\n      return submit;\n    }(),\n    sync: function sync() {\n      this.dialog = this.dialog_login;\n    },\n    close: function close() {\n      this.$store.state.dialog_login = false;\n      this.sync();\n    },\n    open: function open() {\n      this.$store.state.dialog_login = true;\n      this.sync();\n    }\n  },\n  computed: _objectSpread({}, mapState([\"isLogin\"])),\n  mounted: function mounted() {\n    this.usernameset();\n    this.sync();\n  } // created() {\n  //   this.$store.watch(\n  //     state => state.isLogin,\n  //     () => {\n  //       this.isLogin = this.$store.state.isLogin;\n  //     }\n  //   );\n  // }\n\n};",{"version":3,"sources":["Login.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <v-row width=\"auto\" justify=\"center\">\r\n    <v-dialog v-model=\"dialog\" persistent max-width=\"600px\" max-height=\"100%\">\r\n      <template v-slot:activator=\"{ on }\">\r\n        <v-row>\r\n          <v-col style=\"padding:5px;\">\r\n            <v-btn text id=\"welcome-btn\" small rounded v-show=\"isLogin\">Welcome, {{usernameL}}</v-btn>\r\n          </v-col>\r\n          <v-col style=\"padding:0\">\r\n            <v-btn v-show=\"isLogin\" outlined rounded dark @click=\"logout\">Log out</v-btn>\r\n          </v-col>\r\n        </v-row>\r\n        <v-btn v-show=\"!isLogin\" outlined rounded dark v-on=\"on\">Log In</v-btn>\r\n      </template>\r\n      <h1 class=\"white--text\">Welcome! Please login</h1>\r\n      <v-card color=\"rgba(255,255,255,0.95)\">\r\n        <v-form v-model=\"valid\" ref=\"form1\" :lazy-validation=\"lazy\">\r\n          <v-card-title>\r\n            <span class=\"headline\">Log In</span>\r\n          </v-card-title>\r\n          <v-card-text>\r\n            <v-container>\r\n              <v-row>\r\n                <v-col cols=\"12\">\r\n                  <v-text-field\r\n                    v-model=\"username\"\r\n                    :rules=\"requiredRule\"\r\n                    label=\"Username*\"\r\n                    required\r\n                    clearable\r\n                  ></v-text-field>\r\n                </v-col>\r\n                <v-col cols=\"12\">\r\n                  <v-text-field\r\n                    v-model=\"pass1\"\r\n                    :rules=\"requiredRule\"\r\n                    label=\"Password*\"\r\n                    :type=\"showpass ? 'text': 'password'\"\r\n                    :append-icon=\"showpass ? 'mdi-eye':'mdi-eye-off'\"\r\n                    @click:append=\"showpass = !showpass\"\r\n                    required\r\n                  ></v-text-field>\r\n                </v-col>\r\n              </v-row>\r\n            </v-container>\r\n            <small>*indicates required field</small>\r\n          </v-card-text>\r\n          <v-card-actions>\r\n            <div></div>\r\n            <v-col>\r\n              <v-row class=\"pa-2\">\r\n                <v-btn dark rounded color=\"orange\" @click=\"login()\" block :loading=\"loading\">Login</v-btn>\r\n              </v-row>\r\n              <v-row justify=\"center\" class=\"pa-2\">\r\n                <v-btn light rounded color=\"orange\" block outlined @click=\"close\">Close</v-btn>\r\n              </v-row>\r\n              <v-row class=\"pa-2\">\r\n                <Signup />\r\n              </v-row>\r\n              <v-row cols=\"12\" class=\"pa-2\">\r\n                <v-btn rounded block outlined @click=\"loginAdmin()\">Organization Portal</v-btn>\r\n              </v-row>\r\n              <v-row cols=\"12\"></v-row>\r\n            </v-col>\r\n          </v-card-actions>\r\n        </v-form>\r\n      </v-card>\r\n    </v-dialog>\r\n  </v-row>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\nimport Signup from \"./Signup\";\r\nexport default {\r\n  components: {\r\n    Signup\r\n  },\r\n  data() {\r\n    return {\r\n      showpass: false,\r\n      requiredRule: [v => !!v || \"Input required\"],\r\n      lazy: false,\r\n      valid: true,\r\n      usernameL: \"\",\r\n      dialog: false,\r\n      username: \"\",\r\n      pass1: \"\",\r\n      loading: null,\r\n      show: null,\r\n      message: \"\"\r\n    };\r\n  },\r\n  methods: {\r\n    clear() {\r\n      this.username = \"\";\r\n      this.pass1 = \"\";\r\n    },\r\n    snackBar(text, color) {\r\n      this.$store.commit(\"SET_SNACKBAR\", {\r\n        showing: true,\r\n        text: text,\r\n        color: color\r\n      });\r\n    },\r\n    async cancel() {\r\n      // let res =\r\n       await this.$store.dispatch(\"callAPI\", {\r\n        send: {},\r\n        branch: \"/logout/\",\r\n        call: \"DO_NOTHING\",\r\n        setData: {}\r\n      });\r\n\r\n    },\r\n    async logout() {\r\n      let res = await this.$store.dispatch(\"callAPI\", {\r\n        send: {},\r\n        branch: \"/logout/\",\r\n        call: \"DO_NOTHING\",\r\n        setData: {}\r\n      });\r\n      console.log(res);\r\n      if (res.code == \"ok\") {\r\n        this.$store.commit(\"LOG_OUT\", false);\r\n        this.$store.commit(\"SET_SNACKBAR\", {\r\n          showing: true,\r\n          text: \"Log out successfully\",\r\n          color: \"success\"\r\n        });\r\n\r\n        setTimeout(this.$router.push(\"/\"), 1000);\r\n      } else {\r\n        this.$store.commit(\"SET_SNACKBAR\", {\r\n          showing: true,\r\n          text: \"Error when logging out\",\r\n          color: \"error\"\r\n        });\r\n      }\r\n    },\r\n    usernameset() {\r\n      this.usernameL = window.localStorage.getItem(\"username\");\r\n    },\r\n    login() {\r\n      if (this.$refs.form1.validate()) {\r\n        this.submit();\r\n      }\r\n    },\r\n    loginAdmin() {\r\n      if (this.$refs.form1.validate()) {\r\n        this.admin();\r\n      }\r\n    },\r\n    async admin() {\r\n      this.loading = true;\r\n      let send = new FormData();\r\n      send.append(\"username\", this.username);\r\n      send.append(\"password\", this.pass1);\r\n      let branch = \"/login/\";\r\n      let call = \"DO_NOTHING\";\r\n      let dataSend = {\r\n        send: send,\r\n        branch: branch,\r\n        call: call,\r\n        setData: {}\r\n      };\r\n      try {\r\n        let res = await this.$store.dispatch(\"callAPI\", dataSend);\r\n        console.log(res);\r\n        if (res.code == \"ok\") {\r\n          if (res.is_staff != \"true\") {\r\n            this.cancel();\r\n            this.snackBar(\"Not Admin\", \"error\");\r\n          } else {\r\n            this.$store.commit(\"SET_ADMIN_LOGIN\", this.username);\r\n            this.usernameset();\r\n\r\n            this.snackBar(\"Login successfully\", \"success\");\r\n            this.$router.push(\"/admin/qr\");\r\n          }\r\n        } else {\r\n          this.snackBar(\"Login failed, Invalid login info\", \"error\");\r\n        }\r\n      } catch {\r\n        this.$store.dispatch(\"SET_SNACKBAR\", {\r\n          showing: true,\r\n          text: \"Login error\",\r\n          color: \"error\"\r\n        });\r\n      }\r\n      this.loading = false;\r\n      this.close();\r\n    },\r\n    async submit() {\r\n      this.loading = true;\r\n      let send = new FormData();\r\n      send.append(\"username\", this.username);\r\n      send.append(\"password\", this.pass1);\r\n      let branch = \"/login/\";\r\n      let call = \"DO_NOTHING\";\r\n      let dataSend = {\r\n        send: send,\r\n        branch: branch,\r\n        call: call,\r\n        setData: {}\r\n      };\r\n      try {\r\n        let res = await this.$store.dispatch(\"callAPI\", dataSend);\r\n        console.log(res);\r\n\r\n        if (res.code == \"ok\") {\r\n          if (res.is_staff == \"true\") {\r\n            this.snackBar(\"Not user\", \"error\");\r\n            this.cancel();\r\n          } else {\r\n            this.$store.commit(\"SET_USER_LOGIN\", this.username);\r\n            this.usernameset();\r\n\r\n            this.snackBar(\"Login successfully\", \"success\");\r\n            setTimeout(this.$router.push(\"/user/suggest\"), 3000);\r\n          }\r\n        } else {\r\n          this.snackBar(\"Login failed, Invalid login info\", \"error\");\r\n        }\r\n      } catch {\r\n          this.snackBar(\"Login error\", \"error\");\r\n      }\r\n      this.loading = false;\r\n      this.close();\r\n    },\r\n    sync() {\r\n      this.dialog = this.dialog_login;\r\n    },\r\n    close() {\r\n      this.$store.state.dialog_login = false;\r\n      this.sync();\r\n    },\r\n    open() {\r\n      this.$store.state.dialog_login = true;\r\n      this.sync();\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState([\"isLogin\"])\r\n  },\r\n  mounted() {\r\n    this.usernameset();\r\n    this.sync();\r\n  }\r\n  // created() {\r\n  //   this.$store.watch(\r\n  //     state => state.isLogin,\r\n  //     () => {\r\n  //       this.isLogin = this.$store.state.isLogin;\r\n  //     }\r\n  //   );\r\n  // }\r\n};\r\n</script>"],"sourceRoot":"src/components"}]}