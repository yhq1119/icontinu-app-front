{"remainingRequest":"C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\node_modules\\vuetify-loader\\lib\\loader.js!C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\src\\views\\FaceScan.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\src\\views\\FaceScan.vue","mtime":1571889731927},{"path":"C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1564062719000},{"path":"C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Nathan\\Desktop\\github-repository\\icontinu-app-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"C:\\\\Users\\\\Nathan\\\\Desktop\\\\github-repository\\\\icontinu-app-front\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _toArray(arr) { return _arrayWithHoles(arr) || _iterableToArray(arr) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// import axios from \"axios\";\nimport WebCam from \"../components/WebCam\";\nimport { mapState } from \"vuex\";\nexport default {\n  name: \"verify\",\n  components: {\n    \"vue-web-cam\": WebCam\n  },\n  data: function data() {\n    return {\n      showCamera: true,\n      course_id: \"\",\n      overlay: false,\n      img: null,\n      camera: null,\n      deviceId: null,\n      devices: []\n    };\n  },\n  mounted: function mounted() {\n    this.course_id = this.$route.params.id;\n    this.hint();\n    this.getCompetence();\n  },\n  computed: _objectSpread({}, mapState([\"username\"]), {\n    device: function device() {\n      var _this = this;\n\n      return this.devices.find(function (n) {\n        return n.deviceId === _this.deviceId;\n      });\n    }\n  }),\n  watch: {\n    camera: function camera(id) {\n      this.deviceId = id;\n    },\n    devices: function devices() {\n      // Once we have a list select the first one\n      var _this$devices = _toArray(this.devices),\n          first = _this$devices[0],\n          tail = _this$devices.slice(1);\n\n      if (first) {\n        this.camera = first.deviceId;\n        this.deviceId = first.deviceId;\n      }\n    }\n  },\n  methods: {\n    toggle_camera: function toggle_camera() {\n      if (this.showCamera) {\n        this.onStart();\n      } else {\n        this.onStop();\n      }\n    },\n    snackBar: function snackBar(text, color) {\n      this.$store.commit(\"SET_SNACKBAR\", {\n        showing: true,\n        text: text,\n        color: color\n      });\n    },\n    onCapture: function () {\n      var _onCapture = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var file, res;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.overlay = true;\n                this.img = this.$refs.webcam.capture();\n                file = this.dataURLtoFile(this.img, \"taken\"); // console.log(file);\n\n                _context.next = 5;\n                return this.$store.dispatch(\"callAzure\", file);\n\n              case 5:\n                res = _context.sent;\n\n                // console.log(res);\n                if (res.length == 0) {\n                  this.snackBar(\"No face detected!\", \"warning\");\n                  this.overlay = false;\n                } else if (res.length == 1) {\n                  this.callBackend(res[0].faceId);\n                } else {\n                  this.snackBar(\"More than one face, please capture again\", \"warning\");\n                  this.overlay = false;\n                }\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function onCapture() {\n        return _onCapture.apply(this, arguments);\n      }\n\n      return onCapture;\n    }(),\n    callBackend: function () {\n      var _callBackend = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(faceId) {\n        var dataSend, res, res1;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                dataSend = new FormData();\n                dataSend.append(\"username\", this.username);\n                dataSend.append(\"course_id\", this.course_id);\n                dataSend.append(\"face_id\", faceId);\n                _context2.next = 6;\n                return this.$store.dispatch(\"callAPI\", {\n                  send: dataSend,\n                  branch: \"/verification/\",\n                  call: \"DO_NOTHING\",\n                  setData: {}\n                });\n\n              case 6:\n                res = _context2.sent;\n                this.overlay = false;\n\n                if (!(res.code == \"1\")) {\n                  _context2.next = 15;\n                  break;\n                }\n\n                _context2.next = 11;\n                return this.$store.dispatch(\"callAPI\", {\n                  send: dataSend,\n                  branch: \"/user_pass_face/\",\n                  call: \"DO_NOTHING\",\n                  setData: {}\n                });\n\n              case 11:\n                res1 = _context2.sent;\n\n                if (res1.code == \"1\") {\n                  this.snackBar(\"Face verification passed!\", \"success\");\n                  this.$refs.webcam.stop();\n                  this.$router.push({\n                    path: \"/\"\n                  });\n                } else {\n                  this.snackBar(\"Face verification failed! Incorrect course\", \"error\");\n                }\n\n                _context2.next = 16;\n                break;\n\n              case 15:\n                this.snackBar(\"Face verification failed!\", \"error\");\n\n              case 16:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function callBackend(_x) {\n        return _callBackend.apply(this, arguments);\n      }\n\n      return callBackend;\n    }(),\n    dataURLtoFile: function dataURLtoFile(dataURL, filename) {\n      var arr = dataURL.split(\",\");\n      var mime = arr[0].match(/:(.*?);/)[1];\n      var bstr = atob(arr[1]);\n      var n = bstr.length;\n      var u8arr = new Uint8Array(n);\n\n      while (n--) {\n        u8arr[n] = bstr.charCodeAt(n);\n      }\n\n      return new File([u8arr], filename, {\n        type: mime\n      });\n    },\n    onStarted: function onStarted(stream) {// console.log(\"On Started Event\", stream);\n    },\n    onStopped: function onStopped(stream) {// console.log(\"On Stopped Event\", stream);\n    },\n    onStop: function onStop() {\n      this.snackBar(\"Camera stopped\", \"success\");\n      this.$refs.webcam.stop();\n    },\n    onStart: function onStart() {\n      this.snackBar(\"Camera opened\", \"success\");\n      this.$refs.webcam.start();\n    },\n    onError: function onError(error) {// console.log(\"On Error Event\", error);\n    },\n    onCameras: function onCameras(cameras) {\n      this.devices = cameras; // console.log(\"On Cameras Event\", cameras);\n    },\n    onCameraChange: function onCameraChange(deviceId) {\n      this.deviceId = deviceId;\n      this.camera = deviceId; // console.log(\"On Camera Change Event\", deviceId);\n    }\n  }\n};",{"version":3,"sources":["FaceScan.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div align=\"center\">\n    <v-overlay v-model=\"overlay\" z-index=\"10000\">Verifying, please wait...</v-overlay>\n    <v-row>\n      <v-col cols=\"12\" md=\"2\"></v-col>\n      <v-col cols=\"12\" md=\"8\">\n        <v-row>\n          <v-col>\n            <div>\n              <h1 id=\"header1\">Face Verification</h1>\n            </div>\n          </v-col>\n        </v-row>\n        <v-row>\n          <v-col cols=\"12\" md=\"6\" class=\"d-none d-md-block\">\n            <v-card outlined id=\"left-card\">\n              <v-img height=\"100%\" src=../assets/facescan.png>\n              </v-img>\n            </v-card>\n          </v-col>\n          <v-col cols=\"12\" md=\"6\">\n            <v-card outlined id=\"face-scan-card\">\n              <v-row>\n                <v-col>\n                  <!--  -->\n                  <v-row>\n                    <v-col>\n                      <div>\n                        <vue-web-cam\n                          ref=\"webcam\"\n                          :device-id=\"deviceId\"\n                          width=\"100%\"\n                          @started=\"onStarted\"\n                          @stopped=\"onStopped\"\n                          @error=\"onError\"\n                          @cameras=\"onCameras\"\n                          @camera-change=\"onCameraChange\"\n                        />\n                      </div>\n                    </v-col>\n                  </v-row>\n                  <!--  -->\n                  <v-row>\n                    <v-col>\n                      <v-btn\n                        id=\"submitbtn\"\n                        @click=\"onCapture\"\n                        color=\"rgb(231,113,51)\"\n                        dark\n                        block\n                      >Capture Face</v-btn>\n                    </v-col>\n                  </v-row>\n                  <!--  -->\n                  <v-row>\n                    <v-col>\n                      <div class=\"text-center\">\n                        <v-menu offset-y>\n                          <template v-slot:activator=\"{ on }\">\n                            <v-btn block color=\"orange\" dark v-on=\"on\" outlined>CHOOSE CAMERA</v-btn>\n                          </template>\n                          <v-list>\n                            <v-list-item\n                              v-for=\"item in devices\"\n                              :key=\"item.deviceId\"\n                              @click=\"camera = item.deviceId\"\n                            >\n                              <v-list-item-title>{{ item.label }}</v-list-item-title>\n                            </v-list-item>\n                          </v-list>\n                        </v-menu>\n                      </div>\n                    </v-col>\n                  </v-row>\n                  <!--  -->\n                  <v-row>\n                    <v-col>\n                      <v-switch v-model=\"showCamera\" @change=\"toggle_camera\" label=\"Camera on/off\"></v-switch>\n                    </v-col>\n                  </v-row>\n                  <!--  -->\n                  <!--  -->\n                </v-col>\n              </v-row>\n            </v-card>\n          </v-col>\n        </v-row>\n      </v-col>\n      <v-col cols=\"12\" md=\"2\"></v-col>\n    </v-row>\n    <div align=\"center\">\n      <canvas id=\"draw\" style=\"display: none;\" />\n    </div>\n  </div>\n</template>\n\n<script>\n// import axios from \"axios\";\nimport WebCam from \"../components/WebCam\";\nimport { mapState } from \"vuex\";\nexport default {\n  name: \"verify\",\n  components: {\n    \"vue-web-cam\": WebCam\n  },\n  data() {\n    return {\n      showCamera: true,\n      course_id: \"\",\n      overlay: false,\n      img: null,\n      camera: null,\n      deviceId: null,\n      devices: []\n    };\n  },\n  mounted() {\n    this.course_id = this.$route.params.id;\n    this.hint();\n    this.getCompetence();\n  },\n  computed: {\n    ...mapState([\"username\"]),\n\n    device() {\n      return this.devices.find(n => n.deviceId === this.deviceId);\n    }\n  },\n  watch: {\n    camera: function(id) {\n      this.deviceId = id;\n    },\n    devices: function() {\n      // Once we have a list select the first one\n      const [first, ...tail] = this.devices;\n      if (first) {\n        this.camera = first.deviceId;\n        this.deviceId = first.deviceId;\n      }\n    }\n  },\n  methods: {\n    toggle_camera() {\n      if (this.showCamera) {\n        this.onStart();\n      } else {\n        this.onStop();\n      }\n    },\n    snackBar(text, color) {\n      this.$store.commit(\"SET_SNACKBAR\", {\n        showing: true,\n        text: text,\n        color: color\n      });\n    },\n    async onCapture() {\n      this.overlay = true;\n      this.img = this.$refs.webcam.capture();\n      let file = this.dataURLtoFile(this.img, \"taken\");\n      // console.log(file);\n      let res = await this.$store.dispatch(\"callAzure\", file);\n      // console.log(res);\n\n      if (res.length == 0) {\n        this.snackBar(\"No face detected!\", \"warning\");\n        this.overlay = false;\n      } else if (res.length == 1) {\n        this.callBackend(res[0].faceId);\n      } else {\n        this.snackBar(\"More than one face, please capture again\", \"warning\"); \n        this.overlay = false;\n      }\n     \n    },\n    async callBackend(faceId) {\n      let dataSend = new FormData();\n\n      dataSend.append(\"username\", this.username);\n      dataSend.append(\"course_id\", this.course_id);\n      dataSend.append(\"face_id\", faceId);\n      let res = await this.$store.dispatch(\"callAPI\", {\n        send: dataSend,\n        branch: \"/verification/\",\n        call: \"DO_NOTHING\",\n        setData: {}\n      });\n      this.overlay = false;\n      if (res.code == \"1\") {\n        let res1 = await this.$store.dispatch(\"callAPI\", {\n          send: dataSend,\n          branch: \"/user_pass_face/\",\n          call: \"DO_NOTHING\",\n          setData: {}\n        });\n       \n        if (res1.code == \"1\") {\n          this.snackBar(\"Face verification passed!\", \"success\");\n          this.$refs.webcam.stop();\n          this.$router.push({ path: \"/\" });\n          \n        }\n        else{this.snackBar(\"Face verification failed! Incorrect course\", \"error\");\n        }\n      } else {\n        this.snackBar(\"Face verification failed!\", \"error\");\n      }\n    },\n    dataURLtoFile(dataURL, filename) {\n      var arr = dataURL.split(\",\");\n      var mime = arr[0].match(/:(.*?);/)[1];\n      var bstr = atob(arr[1]);\n      var n = bstr.length;\n      var u8arr = new Uint8Array(n);\n      while (n--) {\n        u8arr[n] = bstr.charCodeAt(n);\n      }\n      return new File([u8arr], filename, { type: mime });\n    },\n    onStarted(stream) {\n      // console.log(\"On Started Event\", stream);\n    },\n    onStopped(stream) {\n      // console.log(\"On Stopped Event\", stream);\n    },\n    onStop() {\n      this.snackBar(\"Camera stopped\", \"success\");\n\n      this.$refs.webcam.stop();\n    },\n    onStart() {\n      this.snackBar(\"Camera opened\", \"success\");\n      this.$refs.webcam.start();\n    },\n    onError(error) {\n      // console.log(\"On Error Event\", error);\n    },\n    onCameras(cameras) {\n      this.devices = cameras;\n      // console.log(\"On Cameras Event\", cameras);\n    },\n    onCameraChange(deviceId) {\n      this.deviceId = deviceId;\n      this.camera = deviceId;\n      // console.log(\"On Camera Change Event\", deviceId);\n    }\n  }\n};\n</script>\n<style scoped>\n#left-card {\n  padding: 2em;\n  height: 100%;\n  border-radius: 30px;\n  border-color: #e3d0ff;\n}\n\n#face-scan-card {\n  padding: 2em;\n  border-radius: 30px;\n  border-color: #e3d0ff;\n}\n#header1 {\n  color: #5c6ac4;\n}\n</style>\n"],"sourceRoot":"src/views"}]}